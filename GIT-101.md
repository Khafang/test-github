# Git 101 - คู่มือ Git สำหรับมือใหม่

## Git คืออะไร?

Git คือระบบ **Version Control** ที่ช่วยติดตามการเปลี่ยนแปลงของไฟล์ในโปรเจกต์
ทำให้ทีมทำงานร่วมกันได้โดยไม่เขียนทับงานกัน และสามารถย้อนกลับไปเวอร์ชันก่อนหน้าได้เสมอ

---

## สิ่งที่ต้องรู้ก่อนเริ่ม

```
Working Directory → Staging Area → Local Repository → Remote Repository
   (แก้ไฟล์)      (git add)       (git commit)        (git push)
```

| คำศัพท์ | ความหมาย |
|---------|----------|
| **Repository (Repo)** | โฟลเดอร์โปรเจกต์ที่ Git ติดตามอยู่ |
| **Commit** | จุดบันทึก (snapshot) ของโปรเจกต์ ณ เวลานั้น |
| **Branch** | สาขาของงาน แยกออกมาเพื่อทำ feature โดยไม่กระทบ branch หลัก |
| **Remote** | repo ที่อยู่บน server (เช่น GitHub) |
| **Merge** | การรวม branch เข้าด้วยกัน |
| **Conflict** | เมื่อ Git รวมโค้ดไม่ได้เอง ต้องแก้มือ |

---

## คำสั่งพื้นฐาน

### ตั้งค่าครั้งแรก

```bash
# ตั้งชื่อและอีเมล (ใช้ครั้งเดียว)
git config --global user.name "ชื่อของคุณ"
git config --global user.email "email@example.com"

# ดูค่าที่ตั้งไว้
git config --list
```

### เริ่มต้นโปรเจกต์

```bash
# สร้าง repo ใหม่ในโฟลเดอร์ปัจจุบัน
git init

# โคลน repo จาก GitHub มาลงเครื่อง
git clone <url>
```

### วงจรการทำงานหลัก (Daily Workflow)

```bash
# ดูสถานะไฟล์ (มีอะไรเปลี่ยนบ้าง?)
git status

# ดูว่าแก้อะไรไปบ้าง (ก่อน add)
git diff

# เพิ่มไฟล์เข้า staging area
git add <ชื่อไฟล์>          # เพิ่มไฟล์เดียว
git add .                   # เพิ่มทุกไฟล์ที่เปลี่ยน

# บันทึก commit
git commit -m "ข้อความอธิบายสิ่งที่ทำ"

# ดูประวัติ commit
git log
git log --oneline           # แบบย่อ
```

### การทำงานกับ Remote (GitHub)

```bash
# ดึงโค้ดล่าสุดจาก remote
git pull

# ส่งโค้ดขึ้น remote
git push

# ดู remote ที่เชื่อมอยู่
git remote -v
```

### การทำงานกับ Branch

```bash
# ดู branch ทั้งหมด
git branch

# สร้าง branch ใหม่และสลับไปใช้
git checkout -b <ชื่อ-branch>

# สลับ branch
git checkout <ชื่อ-branch>

# รวม branch เข้า branch ปัจจุบัน
git merge <ชื่อ-branch>

# ลบ branch (หลัง merge แล้ว)
git branch -d <ชื่อ-branch>
```

### คำสั่งดูข้อมูล

```bash
# ดูประวัติแบบกราฟ
git log --oneline --graph --all

# ดูว่า commit นั้นแก้อะไร
git show <commit-hash>

# ดูว่าไฟล์นี้ใครแก้บรรทัดไหน
git blame <ชื่อไฟล์>
```

### ย้อนกลับ / แก้ไขผิดพลาด

```bash
# ยกเลิกการแก้ไขไฟล์ (ก่อน add)
git checkout -- <ชื่อไฟล์>

# เอาไฟล์ออกจาก staging (ก่อน commit)
git reset HEAD <ชื่อไฟล์>

# ย้อน commit ล่าสุด (สร้าง commit ใหม่ที่ undo)
git revert HEAD

# ดูไฟล์ที่ Git ไม่ได้ track
git status
```

---

## Real-World Situations

### Situation 1: เพิ่งเข้าทีมใหม่ ต้อง clone โปรเจกต์มาทำงาน

```bash
git clone https://github.com/company/project.git
cd project
git checkout -b feature/my-first-task
# เริ่มเขียนโค้ดได้เลย
```

---

### Situation 2: ทำ feature ใหม่ (Branch Workflow)

สมมติต้องทำหน้า Login

```bash
# 1. อัปเดตโค้ดล่าสุดก่อน
git checkout main
git pull

# 2. สร้าง branch ใหม่
git checkout -b feature/login-page

# 3. เขียนโค้ด... แก้ไฟล์... ทดสอบ...

# 4. ดูว่าแก้อะไรไปบ้าง
git status
git diff

# 5. add และ commit
git add .
git commit -m "feat: add login page with form validation"

# 6. push ขึ้น GitHub
git push -u origin feature/login-page

# 7. ไปเปิด Pull Request บน GitHub
```

---

### Situation 3: ดึงโค้ดล่าสุดก่อนเริ่มงานทุกวัน

```bash
# ทุกเช้า ก่อนเริ่มทำงาน
git checkout main
git pull
git checkout feature/my-branch
git merge main
# ถ้ามี conflict → แก้ conflict → แล้ว commit
```

---

### Situation 4: เกิด Merge Conflict!

เมื่อ merge แล้วเจอ conflict Git จะแสดงในไฟล์แบบนี้:

```
<<<<<<< HEAD
โค้ดของเรา (branch ปัจจุบัน)
=======
โค้ดของคนอื่น (branch ที่จะ merge เข้ามา)
>>>>>>> feature/other-branch
```

**วิธีแก้:**

```bash
# 1. เปิดไฟล์ที่ conflict แล้วเลือกว่าจะเอาโค้ดไหน
#    (ลบ <<<<<<< ======= >>>>>>> ออกด้วย)

# 2. add ไฟล์ที่แก้แล้ว
git add <ชื่อไฟล์ที่-conflict>

# 3. commit
git commit -m "resolve merge conflict in login page"
```

---

### Situation 5: Commit ผิด ข้อความผิด อยากแก้

```bash
# แก้ข้อความ commit ล่าสุด (ยังไม่ได้ push)
git commit --amend -m "ข้อความใหม่"

# ลืม add ไฟล์ใน commit ล่าสุด (ยังไม่ได้ push)
git add <ไฟล์ที่ลืม>
git commit --amend --no-edit
```

> **ข้อควรระวัง:** ห้ามใช้ `--amend` กับ commit ที่ push ไปแล้ว!

---

### Situation 6: อยากดูว่าเมื่อวาน commit อะไรไปบ้าง

```bash
git log --oneline --since="yesterday"

# หรือดูของคนเฉพาะ
git log --oneline --author="ชื่อ"
```

---

### Situation 7: แก้โค้ดไปแล้ว แต่ยังไม่อยาก commit อยากสลับ branch ไปทำอย่างอื่นก่อน

```bash
# เก็บงานชั่วคราว
git stash

# สลับไป branch อื่นทำงาน
git checkout other-branch
# ทำงาน... commit...

# กลับมา branch เดิมแล้วเอางานคืน
git checkout my-branch
git stash pop
```

---

### Situation 8: อยากย้อนกลับไปดูโค้ดเวอร์ชันเก่า

```bash
# ดูประวัติก่อน
git log --oneline

# ย้อนไปดู (read-only แบบไม่แก้อะไร)
git checkout <commit-hash>

# กลับมาปัจจุบัน
git checkout main
```

---

### Situation 9: ทำ Pull Request (PR) แล้วมีคน review ให้แก้

```bash
# อยู่ที่ branch เดิม
git checkout feature/login-page

# แก้โค้ดตาม review...

git add .
git commit -m "fix: update validation logic per review feedback"
git push

# PR บน GitHub จะอัปเดตอัตโนมัติ
```

---

### Situation 10: ไม่แน่ใจว่าอยู่ branch ไหน สถานะเป็นยังไง

```bash
# เช็คทุกอย่างพร้อมกัน
git status
git branch
git log --oneline -5
```

---

## Commit Message Convention

เขียน commit message ให้ดี ช่วยให้ทีมอ่านเข้าใจ:

| Prefix | ใช้เมื่อ | ตัวอย่าง |
|--------|---------|----------|
| `feat:` | เพิ่ม feature ใหม่ | `feat: add search functionality` |
| `fix:` | แก้ bug | `fix: resolve login redirect loop` |
| `docs:` | แก้เอกสาร | `docs: update API documentation` |
| `style:` | แก้ formatting (ไม่กระทบ logic) | `style: fix indentation in header` |
| `refactor:` | ปรับโครงสร้างโค้ด | `refactor: extract auth middleware` |
| `test:` | เพิ่ม/แก้ test | `test: add unit tests for cart` |
| `chore:` | งานจิปาถะ (config, dependency) | `chore: update eslint config` |

---

## .gitignore

ไฟล์ที่ไม่ควร push ขึ้น Git เช่น:

```
# สร้างไฟล์ .gitignore แล้วใส่:
node_modules/
.env
.DS_Store
dist/
*.log
```

---

## Tips สำหรับมือใหม่

1. **`git status` บ่อยๆ** - เช็คสถานะก่อนทำอะไรเสมอ
2. **Commit บ่อยๆ เป็นก้อนเล็กๆ** - อย่ารอทำเสร็จทั้งหมดแล้วค่อย commit ทีเดียว
3. **เขียน commit message ให้รู้เรื่อง** - อนาคตจะขอบคุณตัวเอง
4. **อย่ากลัว branch** - สร้าง branch ใหม่ไม่เสียอะไร ปลอดภัยกว่าทำบน main
5. **Pull ก่อน Push เสมอ** - ป้องกัน conflict
6. **อย่า force push** - ถ้าไม่แน่ใจ ถามรุ่นพี่ก่อน
7. **อ่าน error message** - Git บอกวิธีแก้ไว้ใน error เกือบทุกครั้ง

---

## แหล่งเรียนรู้เพิ่มเติม

- [Git Documentation](https://git-scm.com/doc)
- [GitHub Skills](https://skills.github.com/)
- [Learn Git Branching (Interactive)](https://learngitbranching.js.org/)
